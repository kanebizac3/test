{% load static %}
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ã†ã‚“ã“è¶³ã—ç®—</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="{% static 'poopgame/css/poopadd.css' %}">
  <script>
    const isChecked = {{ checked|yesno:"true,false" }};
    const isCorrect = {{ result|yesno:"true,false" }};
  </script>
    <script>
      function splitPoop1(num) {
        const container = document.getElementById("poop-container1");
        container.innerHTML = '';  // ä¸­èº«ã‚’ä¸€æ—¦æ¶ˆã™
  
        for (let i = 0; i < num; i++) {
          const img = document.createElement('img');
          img.src = "{% static 'poopgame/img/poop.jpeg' %}";
          img.alt = "ã†ã‚“ã“";
          img.className = "poop";
          container.appendChild(img);
        }
      }
      function splitPoop2(num) {
        const container = document.getElementById("poop-container2");
        container.innerHTML = '';  // ä¸­èº«ã‚’ä¸€æ—¦æ¶ˆã™
  
        for (let i = 0; i < num; i++) {
          const img = document.createElement('img');
          img.src = "{% static 'poopgame/img/poop.jpeg' %}";
          img.alt = "ã†ã‚“ã“";
          img.className = "poop";
          container.appendChild(img);
        }
      }
    </script>
  <script src="{% static 'poopgame/js/poopadd.js' %}" defer></script>
</head>
<body>
  <div class="container">
    <h1>ã†ã‚“ã“è¶³ã—ç®— ğŸ’©</h1>

    <div id="poop-area">
      <div class="poops" id="poop-container1">
        <div class="plus">{{num1}}</div><img src="{% static 'poopgame/img/poop.jpeg' %}"
        class="poop"
        alt="ã¾ã¨ã‚ã†ã‚“ã“"
        onclick="splitPoop1({{ num1 }})"
        style="cursor: pointer;">
      </div>
      <div class="plus">ï¼‹</div>
      <div class="poops" id="poop-container2">
        <div class="plus">{{num2}}</div><img src="{% static 'poopgame/img/poop.jpeg' %}"
        class="poop"
        alt="ã¾ã¨ã‚ã†ã‚“ã“"
        onclick="splitPoop2({{ num2 }})"
        style="cursor: pointer;">
      </div>
    </div>

    {% if checked %}
      {% if result %}
        <div id="correct-area">
          <img src="{% static 'poopgame/img/butt.jpeg' %}" alt="ãŠã—ã‚Š">
          <audio autoplay src="{% static 'poopgame/sounds/kirakira.mp3' %}"></audio>

          <h2>ã‹ã„ã‚±ãƒ„ï¼ã“ãŸãˆã¯{{total}}</h2>
        </div>
      {% else %}
        <div id="wrong-area">
          <div id="wrong-message">ã¶ã£ã¶ãƒ¼ï¼{{ total }}ã§ã™ğŸ’©</div>
          <img id="wrong-boy" src="{% static 'poopgame/img/boy_with_poop.jpeg' %}" alt="å¤±æ•—ã—ãŸå°‘å¹´">
          <img id="fart-img"    src="{% static 'poopgame/img/fart.jpeg' %}"      alt="ã‚ªãƒŠãƒ©">
          <audio autoplay src="{% static 'poopgame/sounds/explosion.mp3' %}"></audio>
        </div>
      {% endif %}

      <!-- â˜…è§£ç­”å¾Œã¯ã“ã“ã ã‘ã‚’è¡¨ç¤ºâ˜… -->
      <form action="{% url 'poopadd' %}" id="next-form">
        <button type="submit" id="next-button">âœ¨ æ¬¡ã®å•é¡Œã¸ âœ¨</button>
      </form>

      <!-- æ­£è§£ï¼ä¸æ­£è§£å¾Œã®ä¸‹ã«è¿½åŠ  -->
      <form action="{% url 'home' %}">
        <button type="submit" id="home-button">ğŸ  ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</button>
      </form>

      <!-- éŸ³å£°ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼ˆå†ç”Ÿã¯JSã§åˆ¶å¾¡ï¼‰ -->
      <audio id="explode-sound" src="{% static 'poopgame/sounds/explosion.mp3' %}"></audio>
      <audio id="flush-sound" src="{% static 'poopgame/sounds/flush.mp3' %}"></audio>

    {% else %}
      <!-- â˜…è§£ç­”å‰ã¯ã“ã®ãƒ•ã‚©ãƒ¼ãƒ ï¼ˆæ•°å­—ãƒ‘ãƒƒãƒ‰ï¼‰ã ã‘ã‚’è¡¨ç¤ºâ˜… -->
      <form method="post" action="{% url 'poopadd_check' %}" id="answer-form">
        {% csrf_token %}
        <input type="hidden" name="num1" value="{{ num1 }}">
        <input type="hidden" name="num2" value="{{ num2 }}">
        <input type="hidden" name="correct_answer" value="{{ total }}">

        <div class="input-area">
          <input type="text" id="answer" name="answer" placeholder="ã„ãã¤ï¼Ÿ" readonly>

          <div class="num-pad">
            {% for d in "1234567890" %}
              <button type="button" onclick="addDigit('{{ d }}')">{{ d }}</button>
            {% endfor %}
            <button type="button" class="clear" onclick="clearAnswer()">C</button>
            <button type="button" class="del"   onclick="deleteLast()">â†</button>
          </div>

          <button type="submit" class="submit">ã“ãŸãˆã‚‹ï¼</button>
        </div>
      </form>
    {% endif %}

  </div>
</body>



</html>
